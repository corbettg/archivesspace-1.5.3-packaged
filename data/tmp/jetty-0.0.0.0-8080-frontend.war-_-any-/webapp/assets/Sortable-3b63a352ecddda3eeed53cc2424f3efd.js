(function(a){if(typeof define==="function"&&define.amd){define(a)}else{if(typeof module!="undefined"&&typeof module.exports!="undefined"){module.exports=a()}else{if(typeof Package!=="undefined"){Sortable=a()}else{window.Sortable=a()}}}})(function(){var C,E,s,Q,m,P,r,n,F,R,D,f,A={},w,z,p=/\s+/g,O="Sortable"+(new Date).getTime(),M=window,d=M.document,k=M.parseInt,i=!!("draggable" in d.createElement("div")),q=false,v=function(T,W,S,aa,U,V,X){var Y=d.createEvent("Event"),ab=(T||W[O]).options,Z="on"+S.charAt(0).toUpperCase()+S.substr(1);Y.initEvent(S,true,true);Y.item=aa||W;Y.from=U||W;Y.clone=s;Y.oldIndex=V;Y.newIndex=X;if(ab[Z]){ab[Z].call(T,Y)}W.dispatchEvent(Y)},x=Math.abs,o=[].slice,H=[],h=g(function(ad,ae,ac){if(ac&&ae.scroll){var S,aa,X=ae.scrollSensitivity,U=ae.scrollSpeed,ab=ad.clientX,Z=ad.clientY,T=window.innerWidth,V=window.innerHeight,Y,W;if(r!==ac){P=ae.scroll;r=ac;if(P===true){P=ac;do{if((P.offsetWidth<P.scrollWidth)||(P.offsetHeight<P.scrollHeight)){break}}while(P=P.parentNode)}}if(P){S=P;aa=P.getBoundingClientRect();Y=(x(aa.right-ab)<=X)-(x(aa.left-ab)<=X);W=(x(aa.bottom-Z)<=X)-(x(aa.top-Z)<=X)}if(!(Y||W)){Y=(T-ab<=X)-(ab<=X);W=(V-Z<=X)-(Z<=X);(Y||W)&&(S=M)}if(A.vx!==Y||A.vy!==W||A.el!==S){A.el=S;A.vx=Y;A.vy=W;clearInterval(A.pid);if(S){A.pid=setInterval(function(){if(S===M){M.scrollTo(M.pageXOffset+Y*U,M.pageYOffset+W*U)}else{W&&(S.scrollTop+=W*U);Y&&(S.scrollLeft+=Y*U)}},24)}}}},30);function a(V,T){this.el=V;this.options=T=u({},T);V[O]=this;var X={group:Math.random(),sort:true,disabled:false,store:null,handle:null,scroll:true,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(V.nodeName)?"li":">*",ghostClass:"sortable-ghost",ignore:"a, img",filter:null,animation:0,setData:function(Z,Y){Z.setData("Text",Y.textContent)},dropBubble:false,dragoverBubble:false,dataIdAttr:"data-id",delay:0};for(var S in X){!(S in T)&&(T[S]=X[S])}var W=T.group;if(!W||typeof W!="object"){W=T.group={name:W}}["pull","put"].forEach(function(Y){if(!(Y in W)){W[Y]=true}});T.groups=" "+W.name+(W.put.join?" "+W.put.join(" "):"")+" ";for(var U in this){if(U.charAt(0)==="_"){this[U]=e(this,this[U])}}y(V,"mousedown",this._onTapStart);y(V,"touchstart",this._onTapStart);y(V,"dragover",this);y(V,"dragenter",this);H.push(this._onDragOver);T.store&&this.sort(T.store.get(this))}a.prototype={constructor:a,_onTapStart:function(Z){var W=this,U=this.el,aa=this.options,Y=Z.type,V=Z.touches&&Z.touches[0],X=(V||Z).target,T=X,S=aa.filter;if(Y==="mousedown"&&Z.button!==0||aa.disabled){return}X=N(X,aa.draggable,U);if(!X){return}R=B(X);if(typeof S==="function"){if(S.call(this,Z,X,this)){v(W,T,"filter",X,U,R);Z.preventDefault();return}}else{if(S){S=S.split(",").some(function(ab){ab=N(T,ab.trim(),U);if(ab){v(W,ab,"filter",X,U,R);return true}});if(S){Z.preventDefault();return}}}if(aa.handle&&!N(T,aa.handle,U)){return}this._prepareDragStart(Z,V,X)},_prepareDragStart:function(S,Z,X){var Y=this,W=Y.el,U=Y.options,T=W.ownerDocument,V;if(X&&!C&&(X.parentNode===W)){w=S;Q=W;C=X;m=C.nextSibling;f=U.group;V=function(){Y._disableDelayedDrag();C.draggable=true;U.ignore.split(",").forEach(function(aa){G(C,aa.trim(),l)});Y._triggerDragStart(Z)};y(T,"mouseup",Y._onDrop);y(T,"touchend",Y._onDrop);y(T,"touchcancel",Y._onDrop);if(U.delay){y(T,"mousemove",Y._disableDelayedDrag);y(T,"touchmove",Y._disableDelayedDrag);Y._dragStartTimer=setTimeout(V,U.delay)}else{V()}}},_disableDelayedDrag:function(){var S=this.el.ownerDocument;clearTimeout(this._dragStartTimer);K(S,"mousemove",this._disableDelayedDrag);K(S,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(T){if(T){w={target:C,clientX:T.clientX,clientY:T.clientY};this._onDragStart(w,"touch")}else{if(!i){this._onDragStart(w,true)}else{y(C,"dragend",this);y(Q,"dragstart",this._onDragStart)}}try{if(d.selection){d.selection.empty()}else{window.getSelection().removeAllRanges()}}catch(S){}},_dragStarted:function(){if(Q&&C){j(C,this.options.ghostClass,true);a.active=this;v(this,Q,"start",C,Q,R)}},_emulateDragOver:function(){if(z){L(E,"display","none");var U=d.elementFromPoint(z.clientX,z.clientY),T=U,V=" "+this.options.group.name+"",S=H.length;if(T){do{if(T[O]&&T[O].options.groups.indexOf(V)>-1){while(S--){H[S]({clientX:z.clientX,clientY:z.clientY,target:U,rootEl:T})}break}U=T}while(T=T.parentNode)}L(E,"display","")}},_onTouchMove:function(T){if(w){var W=T.touches?T.touches[0]:T,U=W.clientX-w.clientX,S=W.clientY-w.clientY,V=T.touches?"translate3d("+U+"px,"+S+"px,0)":"translate("+U+"px,"+S+"px)";z=W;L(E,"webkitTransform",V);L(E,"mozTransform",V);L(E,"msTransform",V);L(E,"transform",V);T.preventDefault()}},_onDragStart:function(S,W){var X=S.dataTransfer,T=this.options;this._offUpEvents();if(f.pull=="clone"){s=C.cloneNode(true);L(s,"display","none");Q.insertBefore(s,C)}if(W){var V=C.getBoundingClientRect(),U=L(C),Y;E=C.cloneNode(true);L(E,"top",V.top-k(U.marginTop,10));L(E,"left",V.left-k(U.marginLeft,10));L(E,"width",V.width);L(E,"height",V.height);L(E,"opacity","0.8");L(E,"position","fixed");L(E,"zIndex","100000");Q.appendChild(E);Y=E.getBoundingClientRect();L(E,"width",V.width*2-Y.width);L(E,"height",V.height*2-Y.height);if(W==="touch"){y(d,"touchmove",this._onTouchMove);y(d,"touchend",this._onDrop);y(d,"touchcancel",this._onDrop)}else{y(d,"mousemove",this._onTouchMove);y(d,"mouseup",this._onDrop)}this._loopId=setInterval(this._emulateDragOver,150)}else{if(X){X.effectAllowed="move";T.setData&&T.setData.call(this,X,C)}y(d,"drop",this)}setTimeout(this._dragStarted,0)},_onDragOver:function(ab){var S=this.el,ak,Y,T,X=this.options,Z=X.group,W=Z.put,U=(f===Z),aj=X.sort;if(ab.preventDefault!==void 0){ab.preventDefault();!X.dragoverBubble&&ab.stopPropagation()}if(f&&!X.disabled&&(U?aj||(T=!Q.contains(C)):f.pull&&W&&((f.name===Z.name)||(W.indexOf&&~W.indexOf(f.name))))&&(ab.rootEl===void 0||ab.rootEl===this.el)){h(ab,X,this.el);if(q){return}ak=N(ab.target,X.draggable,S);Y=C.getBoundingClientRect();if(T){t(true);if(s||m){Q.insertBefore(C,s||m)}else{if(!aj){Q.appendChild(C)}}return}if((S.children.length===0)||(S.children[0]===E)||(S===ab.target)&&(ak=I(S,ab))){if(ak){if(ak.animated){return}ae=ak.getBoundingClientRect()}t(U);S.appendChild(C);this._animate(Y,C);ak&&this._animate(ae,ak)}else{if(ak&&!ak.animated&&ak!==C&&(ak.parentNode[O]!==void 0)){if(n!==ak){n=ak;F=L(ak)}var ae=ak.getBoundingClientRect(),af=ae.right-ae.left,ad=ae.bottom-ae.top,ac=/left|right|inline/.test(F.cssFloat+F.display),ah=(ak.offsetWidth>C.offsetWidth),ai=(ak.offsetHeight>C.offsetHeight),ag=(ac?(ab.clientX-ae.left)/af:(ab.clientY-ae.top)/ad)>0.5,aa=ak.nextElementSibling,V;q=true;setTimeout(b,30);t(U);if(ac){V=(ak.previousElementSibling===C)&&!ah||ag&&ah}else{V=(aa!==C)&&!ai||ag&&ai}if(V&&!aa){S.appendChild(C)}else{ak.parentNode.insertBefore(C,V?aa:ak)}this._animate(Y,C);this._animate(ae,ak)}}}},_animate:function(S,V){var T=this.options.animation;if(T){var U=V.getBoundingClientRect();L(V,"transition","none");L(V,"transform","translate3d("+(S.left-U.left)+"px,"+(S.top-U.top)+"px,0)");V.offsetWidth;L(V,"transition","all "+T+"ms");L(V,"transform","translate3d(0,0,0)");clearTimeout(V.animated);V.animated=setTimeout(function(){L(V,"transition","");L(V,"transform","");V.animated=false},T)}},_offUpEvents:function(){var S=this.el.ownerDocument;K(d,"touchmove",this._onTouchMove);K(S,"mouseup",this._onDrop);K(S,"touchend",this._onDrop);K(S,"touchcancel",this._onDrop)},_onDrop:function(S){var U=this.el,T=this.options;clearInterval(this._loopId);clearInterval(A.pid);clearTimeout(this.dragStartTimer);K(d,"drop",this);K(d,"mousemove",this._onTouchMove);K(U,"dragstart",this._onDragStart);this._offUpEvents();if(S){S.preventDefault();!T.dropBubble&&S.stopPropagation();E&&E.parentNode.removeChild(E);if(C){K(C,"dragend",this);l(C);j(C,this.options.ghostClass,false);if(Q!==C.parentNode){D=B(C);v(null,C.parentNode,"sort",C,Q,R,D);v(this,Q,"sort",C,Q,R,D);v(null,C.parentNode,"add",C,Q,R,D);v(this,Q,"remove",C,Q,R,D)}else{s&&s.parentNode.removeChild(s);if(C.nextSibling!==m){D=B(C);v(this,Q,"update",C,Q,R,D);v(this,Q,"sort",C,Q,R,D)}}a.active&&v(this,Q,"end",C,Q,R,D)}Q=C=E=m=s=P=r=w=z=n=F=f=a.active=null;this.save()}},handleEvent:function(S){var T=S.type;if(T==="dragover"||T==="dragenter"){if(C){this._onDragOver(S);J(S)}}else{if(T==="drop"||T==="dragend"){this._onDrop(S)}}},toArray:function(){var S=[],W,V=this.el.children,U=0,X=V.length,T=this.options;for(;U<X;U++){W=V[U];if(N(W,T.draggable,this.el)){S.push(W.getAttribute(T.dataIdAttr)||c(W))}}return S},sort:function(S){var T={},U=this.el;this.toArray().forEach(function(X,V){var W=U.children[V];if(N(W,this.options.draggable,U)){T[X]=W}},this);S.forEach(function(V){if(T[V]){U.removeChild(T[V]);U.appendChild(T[V])}})},save:function(){var S=this.options.store;S&&S.set(this)},closest:function(T,S){return N(T,S||this.options.draggable,this.el)},option:function(T,U){var S=this.options;if(U===void 0){return S[T]}else{S[T]=U}},destroy:function(){var S=this.el;S[O]=null;K(S,"mousedown",this._onTapStart);K(S,"touchstart",this._onTapStart);K(S,"dragover",this);K(S,"dragenter",this);Array.prototype.forEach.call(S.querySelectorAll("[draggable]"),function(T){T.removeAttribute("draggable")});H.splice(H.indexOf(this._onDragOver),1);this._onDrop();this.el=S=null}};function t(S){if(s&&(s.state!==S)){L(s,"display",S?"none":"");!S&&s.state&&Q.insertBefore(s,C);s.state=S}}function e(S,U){var T=o.call(arguments,2);return U.bind?U.bind.apply(U,[S].concat(T)):function(){return U.apply(S,T.concat(o.call(arguments)))}}function N(W,T,U){if(W){U=U||d;T=T.split(".");var S=T.shift().toUpperCase(),V=new RegExp("\\s("+T.join("|")+")\\s","g");do{if((S===">*"&&W.parentNode===U)||((S===""||W.nodeName.toUpperCase()==S)&&(!T.length||((" "+W.className+" ").match(V)||[]).length==T.length))){return W}}while(W!==U&&(W=W.parentNode))}return null}function J(S){S.dataTransfer.dropEffect="move";S.preventDefault()}function y(T,U,S){T.addEventListener(U,S,false)}function K(T,U,S){T.removeEventListener(U,S,false)}function j(U,S,V){if(U){if(U.classList){U.classList[V?"add":"remove"](S)}else{var T=(" "+U.className+" ").replace(p," ").replace(" "+S+" "," ");U.className=(T+(V?" "+S:"")).replace(p," ")}}}function L(T,V,U){var S=T&&T.style;if(S){if(U===void 0){if(d.defaultView&&d.defaultView.getComputedStyle){U=d.defaultView.getComputedStyle(T,"")}else{if(T.currentStyle){U=T.currentStyle}}return V===void 0?U:U[V]}else{if(!(V in S)){V="-webkit-"+V}S[V]=U+(typeof U==="string"?"":"px")}}}function G(S,U,V){if(S){var W=S.getElementsByTagName(U),T=0,X=W.length;if(V){for(;T<X;T++){V(W[T],T)}}return W}return[]}function l(S){S.draggable=false}function b(){q=false}function I(U,S){var T=U.lastElementChild,V=T.getBoundingClientRect();return(S.clientY-(V.top+V.height)>5)&&T}function c(U){var V=U.tagName+U.className+U.src+U.href+U.textContent,S=V.length,T=0;while(S--){T+=V.charCodeAt(S)}return T.toString(36)}function B(T){var S=0;while(T&&(T=T.previousElementSibling)){if(T.nodeName.toUpperCase()!=="TEMPLATE"){S++}}return S}function g(V,T){var S,U;return function(){if(S===void 0){S=arguments;U=this;setTimeout(function(){if(S.length===1){V.call(U,S[0])}else{V.apply(U,S)}S=void 0},T)}}}function u(U,T){if(U&&T){for(var S in T){if(T.hasOwnProperty(S)){U[S]=T[S]}}}return U}a.utils={on:y,off:K,css:L,find:G,bind:e,is:function(T,S){return !!N(T,S,T)},extend:u,throttle:g,closest:N,toggleClass:j,index:B};a.version="1.2.0";a.create=function(T,S){return new a(T,S)};return a});