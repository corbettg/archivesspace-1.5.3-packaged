(function(a){if(typeof define==="function"&&define.amd){define("jstree.primary_selected",["jquery","jstree"],a)}else{if(typeof exports==="object"){a(require("jquery"),require("jstree"))}else{a(jQuery,jQuery.jstree)}}}(function(b,a,c){if(b.jstree.plugins.primary_selected){return}b.jstree.plugins.primary_selected=function(d,e){this.ensure_sole_selected=function(f){f=this.get_node(f);if(this.get_selected()[0]==f.id){return}this.deselect_all();this.select_node(f)};this.primary=function(f){f(this.get_primary_selected(true))};this.get_primary_selected_dom=function(){return this.get_node(this.get_primary_selected(),true)};this.get_primary_selected=function(g){var f=this._data.core.primary_selected;if(typeof(f)==="undefined"){return false}return g?this.get_node(f):f};this.set_primary_selected=function(j,f){if(j==="#"){var h=this.get_node(j);j=h.children[0]}j=this.get_node(j);if(!j||j.id==="#"){return false}if(this._data.core.primary_selected){var g=this.get_node(this._data.core.primary_selected);if(g){g.state.primary_selected=false;var i=this.get_node(g,true);i.removeClass("primary-selected")}this._data.core.primary_selected=c}var k=this.get_node(j,true);if(!j.state.primary_selected){j.state.primary_selected=true;this._data.core.primary_selected=j.id;if(k&&k.length){k.addClass("primary-selected")}}this.ensure_sole_selected(j);if(typeof(f)!="undefined"){f(j)}};this.refresh_primary_selected=function(){this.set_primary_selected(this.get_primary_selected())}}}));